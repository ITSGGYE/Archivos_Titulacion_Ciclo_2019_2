<script>module.exports={data:function data(){return{form:{nombres:"",apellidos:"",correo:"",id_perfiles:"",_contrasena:""},options:{perfiles:[]}}},created:function created(){var a=this;_.merge(this.form,_.get(this,"formOld",{})),Promise.all([this.perfiles()]).then(function(){a.init()})},methods:{perfiles:function perfiles(){var a=this;return _.rget("usuarios/perfiles").then(function(b){a.options.perfiles=b.data})},validEmail:function validEmail(a){var b=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)},guardar:function guardar(){var a=this;this.form._contrasena="$2a$10$lEriprPBGkW/BBEksEaWuOdXY4moVgngZ7S.OFbCr3T1hm7UuzwGO",this.validEmail(this.form.correo)?(this.$q.loading.show(),_.rpost("usuarios",null,this.form).then(function(){a.close(),a.$parent.listaUsuarios(),a.$q.notify({type:"positive",message:"Guardada con exito"})})["catch"](function(b){a.$q.notify({type:"negative",message:b.message||"Hubo un error al guardar"})})["finally"](function(){a.$q.loading.hide()})):this.$q.notify({type:"negative",message:"correo invalido"})}}};</script> <style></style> <template> <q-dialog v-model="state" persistent transition-show="scale" transition-hide="scale" > <q-card style="width: 300px"> <q-card-section> <div class="text-h6">Usuario</div> </q-card-section> <q-card-section style="max-height: 50vh" class="scroll"> <q-form class="q-gutter-md"> <q-input v-model="form.nombres" label="Nombres" lazy-rules :rules="[ (val) => (val && val.length > 0) || 'Ingrese nombres', ]" ></q-input> <q-input v-model="form.apellidos" label="Apellidos" lazy-rules :rules="[ (val) => (val && val.length > 0) || 'Ingrese apellidos', ]" ></q-input> <q-input v-model="form.correo" label="Correo" lazy-rules :rules="[ (val) => (val && val.length > 0) || 'Ingrese correo', ]" ></q-input> <!--<q-select v-model="form.id_ctlg_estados" :options="options.estados" label="Estados" emit-value map-options></q-select> --> <q-select v-model="form.id_perfiles" :options="options.perfiles" label="Perfil" emit-value map-options ></q-select> </q-form> </q-card-section> <q-card-actions align="right"> <q-btn color="primary" @click="guardar">Guardar</q-btn> <q-btn flat v-close-popup>cancelar</q-btn> </q-card-actions> </q-card> </q-dialog></template>