<script>module.exports={data:function data(){return{form:{nombre:"",capacidad:"",id_anos_lectivos:"",id_edificios:"",id_jornadas:""},options:{anos_lectivos:[],edificios:[],jornadas:[]}}},created:function created(){var a=this;_.merge(this.form,_.get(this,"formOld",{})),Promise.all([this.anos_lectivos()]).then(function(){a.init()})},methods:{estados:function estados(){var a=this;return _.rget("aulas/estados").then(function(b){a.options.estados=b.data})},anos_lectivos:function anos_lectivos(){var a=this;return _.rget("anos_lectivos/ctlg").then(function(b){a.options.anos_lectivos=b.data})},jornadas:function jornadas(){var a=this;return this.form.id_edificios="",this.form.id_jornadas="",_.rget("jornadas/ctlg/".concat(this.form.id_anos_lectivos)).then(function(b){a.options.jornadas=b.data})},edificios:function edificios(){var a=this;return this.form.id_edificios="",this.form.id_jornadas="",_.rget("edificios/ctlg/".concat(this.form.id_anos_lectivos)).then(function(b){a.options.edificios=b.data})},guardar:function guardar(){var a=this;this.$q.loading.show(),_.rpost("aulas",null,this.form).then(function(){a.close(),a.$parent.listaAulas()})["catch"](function(b){a.$q.notify({type:"negative",message:b.message||"Hubo un error al guardar"})})["finally"](function(){a.$q.loading.hide()})}}};</script> <style></style> <template> <q-dialog v-model="state" persistent transition-show="scale" transition-hide="scale"> <q-card style="width: 300px"> <q-card-section> <div class="text-h6">Aula</div> </q-card-section> <q-card-section style="max-height: 50vh" class="scroll"> <q-form class="q-gutter-md" > <q-input v-model="form.nombre" label="Nombre" lazy-rules :rules="[ val => val && val.length > 0 || 'Please type something']" ></q-input> <q-input v-model="form.capacidad" label="Capacidad" type="number" :min="0" ></q-input> <q-select v-model="form.id_anos_lectivos"   @input="edificios(), jornadas()"  :options="options.anos_lectivos" label="AÃ±o lectivo" emit-value map-options></q-select> <q-select v-model="form.id_edificios" :options="options.edificios" label="Edificio" emit-value map-options></q-select> <q-select v-model="form.id_jornadas" :options="options.jornadas" label="jornadas" emit-value map-options></q-select> <!--<q-select disable v-model="form.id_ctlg_estados" :options="options.estados" label="Estado" emit-value map-options></q-select> --> </q-form> </q-card-section> <q-card-actions align="right"> <q-btn color="primary" @click="guardar">Guardar</q-btn> <q-btn flat v-close-popup >cancelar</q-btn> </q-card-actions> </q-card> </q-dialog> </template>