<script>module.exports={data:function data(){return{form:{_id_anos_lectivos:"",_id_jornadas:"",_id_dac:"",_id_docentes:this.$root.currentPage.app.informacion.id_docentes,_id_insumos:"",_descripciones:""},options:{anos_lectivos:[],jornadas:[],dac:[],docentes:[],insumos:[]}}},created:function created(){var a=this;_.merge(this.form,_.get(this,"formOld",{})),Promise.all([this.anos_lectivos(this.$root.currentPage.app.informacion.id_docentes)]).then(function(){a.init()})},methods:{docentes:function docentes(){var a=this;return _.rget("docentes/ctlg").then(function(b){a.options.docentes=b.data})},anos_lectivos:function anos_lectivos(a){var b=this;return _.rget("docentes_asignar_cursos/docentes_asignar_ano/".concat(a)).then(function(a){b.options.anos_lectivos=a.data})},jornadas:function jornadas(){var a=this;return this.form._id_jornadas="",_.rget("actividades_cursos/docentes_asignar_jornada",{_id_docente:this.$root.currentPage.app.informacion.id_docentes,_id_anos_lectivo:this.form._id_anos_lectivos}).then(function(b){a.options.jornadas=b.data})},dac:function dac(){var a=this;return this.form._id_dac="",_.rget("actividades_cursos/dac_actividad_curso",{_id_docente:this.$root.currentPage.app.informacion.id_docentes,_id_anos_lectivo:this.form._id_anos_lectivos,_id_jornada:this.form._id_jornadas}).then(function(b){a.options.dac=b.data})},insumos:function insumos(){var a=this;return this.form._id_insumos="",_.rget("actividades_cursos/insumos_dac/".concat(this.form._id_anos_lectivos)).then(function(b){a.options.insumos=b.data})},guardar:function guardar(){var a=this;this.$q.loading.show(),_.rpost("actividades_cursos",null,{_id_dac:this.form._id_dac,_id_insumos:this.form._id_insumos,_descripciones:this.form._descripciones}).then(function(){a.close(),a.$parent.listaActividadesCursos(a.$root.currentPage.app.informacion.id_docentes),a.$q.notify({type:"positive",message:"Guardada con exito"})})["catch"](function(b){a.$q.notify({type:"negative",message:b.message||"Hubo un error al guardar"})})["finally"](function(){a.$q.loading.hide()})}}};</script> <style></style> <template> <q-dialog v-model="state" persistent transition-show="scale" transition-hide="scale" > <q-card style="width: 300px"> <q-card-section> <div class="text-h6">Asignar Actividad al curso</div> </q-card-section> <q-card-section style="max-height: 50vh" class="scroll"> <q-form class="q-gutter-md"> <!--<q-select v-model="form._id_docentes" @input="anos_lectivos(),materias(),jornadas()" :options="options.docentes" label="Docentes" emit-value map-options></q-select> --> <q-select v-model="form._id_anos_lectivos" @input="jornadas(), insumos()" :options="options.anos_lectivos" label="Año Lectivo" emit-value map-options ></q-select> <q-select v-model="form._id_jornadas" @input="dac()" :options="options.jornadas" label="Jornadas" emit-value map-options ></q-select> <q-select v-model="form._id_dac" :options="options.dac" label="Cursos - Aula/Paralelo - Materia" emit-value map-options ></q-select> <q-select v-model="form._id_insumos" :options="options.insumos" label="Periodo - Parciales - Insumos" emit-value map-options ></q-select> <q-input v-model="form._descripciones" label="Descripción" lazy-rules :rules="[ (val) => (val && val.length > 0) || 'Please type something', ]" ></q-input> </q-form> </q-card-section> <q-card-actions align="right"> <q-btn color="primary" @click="guardar">Guardar</q-btn> <q-btn flat v-close-popup>cancelar</q-btn> </q-card-actions> </q-card> </q-dialog></template>