<script>module.exports={data:function data(){return{form:{_id_anos_lectivos:"",_id_jornadas:"",_id_cursos:"",_id_estudiantes:"",_id_paralelos_aulas:"",nombre_estudiante:"",_cedulas:""},options:{anos_lectivos:[],jornadas:[],estudiantes:[],cursos:[],paralelos_aulas:[],cedula:[]}}},created:function created(){var a=this;_.merge(this.form,_.get(this,"formOld",{})),Promise.all([this.anos_lectivos()]).then(function(){a.init()})},methods:{anos_lectivos:function anos_lectivos(){var a=this;return _.rget("anos_lectivos/ctlg").then(function(b){a.options.anos_lectivos=b.data})},cedula:function cedula(){var a=this;return this.form.nombre_estudiante="",_.rget("inscripciones/inscripciones_cedula",{_id_ano:this.form._id_anos_lectivos,_cedula:this.form._cedulas}).then(function(b){if(0<b.data.length)return a.form.nombre_estudiante=b.data[0].label,a.form._id_estudiantes=b.data[0].value,(a.cursos(),a.jornadas())})},jornadas:function jornadas(){var a=this;return _.rget("inscripciones/jornadas_inscripciones",{_id_estudiante:this.form._id_estudiantes,_id_anos_lectivos:this.form._id_anos_lectivos}).then(function(b){a.options.jornadas=b.data})},cursos:function cursos(){var a=this;return _.rget("inscripciones/cursos_inscripcion",{_id_estudiante:this.form._id_estudiantes,_id_anos_lectivos:this.form._id_anos_lectivos}).then(function(b){a.options.cursos=b.data})},paralelos_aulas:function paralelos_aulas(){var a=this;return this.form._id_paralelos_aulas="",_.rget("docentes_asignar_cursos/cur_paralelos_aulas/".concat(this.form._id_cursos)).then(function(b){a.options.paralelos_aulas=b.data})},guardar:function guardar(){var a=this;this.$q.loading.show(),_.rpost("matriculaciones",null,this.form).then(function(){a.close(),a.$parent.listaMatriculaciones(),a.$q.notify({type:"positive",message:"Guardada con exito"})})["catch"](function(b){a.$q.notify({type:"negative",message:b.message||"Hubo un error al guardar"})})["finally"](function(){a.$q.loading.hide()})}}};</script> <style></style> <template> <q-dialog v-model="state" persistent transition-show="scale" transition-hide="scale" > <q-card style="width: 300px"> <q-card-section> <div class="text-h6">Matriculación</div> </q-card-section> <q-card-section style="max-height: 50vh" class="scroll"> <q-form class="q-gutter-md"> <q-select v-model="form._id_anos_lectivos" :options="options.anos_lectivos" label="Año Lectivo" @input="cedula()" emit-value map-options ></q-select> <q-input v-model="form._cedulas" label="Nùmero de Documento" @input="cedula()" autofocus lazy-rules :rules="[ (val) => (val && val.length > 0) || 'Requerido', ]" ></q-input> <q-input v-show="form.nombre_estudiante != ''" v-model="form.nombre_estudiante" label="Estudiante" readonly ></q-input> <!-- <q-select v-model="form._id_estudiantes" @input="cursos(), jornadas()" :options="options.estudiantes" label="Estudiante" emit-value map-options ></q-select>--> <q-select v-model="form._id_jornadas" :options="options.jornadas" label="Jornadas" emit-value map-options ></q-select> <q-select v-model="form._id_cursos" @input="paralelos_aulas()" :options="options.cursos" label="Cursos" emit-value map-options ></q-select> <q-select v-model="form._id_paralelos_aulas" :options="options.paralelos_aulas" label="Paralelo - Aula" emit-value map-options ></q-select> </q-form> </q-card-section> <q-card-actions align="right"> <q-btn color="primary" @click="guardar">Guardar</q-btn> <q-btn flat v-close-popup>cancelar</q-btn> </q-card-actions> </q-card> </q-dialog></template>