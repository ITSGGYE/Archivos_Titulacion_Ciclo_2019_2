<script>module.exports={data:function data(){return{form:{_nombre:""},options:{}}},created:function created(){var a=this;_.merge(this.form,_.get(this,"formOld",{})),Promise.all([]).then(function(){a.init()})},methods:{guardar:function guardar(){var a=this,b=this.form._nombre.replace(/ /g,""),d=b.split("-"),e=[];e=d.map(function(a){return parseInt(a,10)}),e.forEach(function(a,b){return a,b});var g=e[0],b=e[1],h=moment(g,"YYYY").isValid(),i=moment(g,"YYYY").add(1,"year").calendar(),c=moment(i).year();null!==this.form._nombre&&""!==this.form._nombre&&c==b?(this.$q.loading.show(),_.rpost("anos_lectivos",null,this.form).then(function(){a.close(),a.$parent.listaAnos(),a.$q.notify({type:"positive",timeout:500,message:"Guardada con exito"})})["catch"](function(b){a.$q.notify({type:"negative",message:b.message||"Hubo un error al guardar"})})["finally"](function(){a.$q.loading.hide()})):this.$q.notify({type:"negative",message:"no se puede guardar"})}}};</script> <style></style> <template> <q-dialog v-model="state" persistent transition-show="scale" transition-hide="scale" > <q-card style="width: 300px"> <q-card-section> <div class="text-h6">AÃ±o Lectivo</div> </q-card-section> <q-card-section style="max-height: 50vh" class="scroll"> <q-form class="q-gutter-md"> <q-input v-model="form._nombre" label="Nombre" mask="#### - #### " :rules="[(val) => !!val || '* Requerido']" ></q-input> </q-form> </q-card-section> <q-card-actions align="right"> <q-btn color="primary" @click="guardar">Guardar</q-btn> <q-btn flat v-close-popup>cancelar</q-btn> </q-card-actions> </q-card> </q-dialog></template>