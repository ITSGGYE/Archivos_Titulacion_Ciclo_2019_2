<script>module.exports={data:function data(){return{form:{_nombres:"",_apellidos:"",_foto:"",_id_ctlg_tipos_documentos:"",_numero_documento:"",_id_ctlg_genero:"",_correo:"",_direccion:"",_telefono:"",_celular:"",_id_ctlg_paises:"",_id_ctlg_provincias:"",_id_ctlg_parroquias:"",_id_ctlg_cantones:"",_fecha_nacimiento:"",_edad:"",_id_ctlg_tipos_sangre:"",_id_ctlg_parentescos:"",_observacion:""},options:{tipos_documentos:[],generos:[],paises:[],provincias:[],parroquias:[],cantones:[],tipos_sangre:[],parentescos:[]}}},created:function created(){var a=this;_.merge(this.form,_.get(this,"formOld",{})),Promise.all([this.tipos_documentos(),this.generos(),this.paises(),this.provincias(),this.tipos_sangre(),this.parentescos()]).then(function(){a.init()})},methods:{paises:function paises(){var a=this;return _.rget("catalogos/paises").then(function(b){a.options.paises=b.data})},tipos_documentos:function tipos_documentos(){var a=this;return _.rget("catalogos/tipos_documentos").then(function(b){a.options.tipos_documentos=b.data})},generos:function generos(){var a=this;return _.rget("catalogos/generos").then(function(b){a.options.generos=b.data})},provincias:function provincias(){var a=this;return _.rget("catalogos/provincias").then(function(b){a.options.provincias=b.data})},parroquias:function parroquias(){var a=this;return _.rget("catalogos/provincias_parroquias/".concat(this.form._id_ctlg_cantones)).then(function(b){a.options.parroquias=b.data})},cantones:function cantones(){var a=this;return _.rget("catalogos/provincias_cantones/".concat(this.form._id_ctlg_provincias)).then(function(b){a.options.cantones=b.data})},tipos_sangre:function tipos_sangre(){var a=this;return _.rget("catalogos/tipos_sangre").then(function(b){a.options.tipos_sangre=b.data})},parentescos:function parentescos(){var a=this;return _.rget("catalogos/parentescos").then(function(b){a.options.parentescos=b.data})},guardar:function guardar(){var a=this;this.$q.loading.show(),_.rpost("estudiantes",null,this.form).then(function(){a.close(),a.$parent.listaEstudiantes()})["catch"](function(b){a.$q.notify({type:"negative",message:b.message||"Hubo un error al guardar"})})["finally"](function(){a.$q.loading.hide()})}}};</script> <style></style> <template> <q-dialog v-model="state" persistent transition-show="scale" transition-hide="scale"> <q-card style="width: 300px"> <q-card-section> <div class="text-h6">Estudiante</div> </q-card-section> <q-card-section style="max-height: 50vh" class="scroll"> <q-form class="q-gutter-md" > <q-input v-model="form._nombres" label="Nombres" lazy-rules :rules="[ val => val && val.length > 0 || 'Please type something']" ></q-input> <q-input v-model="form._apellidos" label="Apellidos" lazy-rules :rules="[ val => val && val.length > 0 || 'Please type something']" ></q-input> <q-select v-model="form._id_ctlg_tipos_documentos"  :options="options.tipos_documentos" label="Tipo de documento" emit-value map-options></q-select> <q-input v-model="form._numero_documento" label="Número de documento" lazy-rules :rules="[ val => val && val.length > 0 || 'Please type something']" ></q-input> <q-select v-model="form._id_ctlg_generos" :options="options.generos" label="Genero" emit-value map-options></q-select> <q-input v-model="form._correo" label="Correo" lazy-rules :rules="[ val => val && val.length > 0 || 'Please type something']" ></q-input> <q-input v-model="form._direccion" label="Dirección" lazy-rules :rules="[ val => val && val.length > 0 || 'Please type something']" ></q-input> <q-input v-model="form._telefono" label="Telefono" mask="(###) ### - ####" fill-mask         ></q-input> <q-input v-model="form._celular" label="Celular" lazy-rules :rules="[ val => val && val.length > 0 || 'Please type something']" ></q-input> <q-select v-model="form._id_ctlg_paises"  :options="options.paises" label="País de Nacimiento" emit-value map-options></q-select> <q-input v-model="form._fecha_nacimento" label="Fecha de Nacimiento" lazy-rules :rules="[ val => val && val.length > 0 || 'Please type something']" ></q-input> <q-input v-model="form._edad" label="Edad" lazy-rules :rules="[ val => val && val.length > 0 || 'Please type something']" ></q-input> <q-select v-model="form._id_ctlg_provincias"  @input="cantones()"  :options="options.provincias" label="Provincia de Residencia" emit-value map-options></q-select> <q-select v-model="form._id_ctlg_cantones"  @input="parroquias()"  :options="options.cantones" label="Cantón de Residencia" emit-value map-options></q-select> <q-select v-model="form._id_ctlg_parroquias"  :options="options.parroquias" label="Parroquia de Residencia" emit-value map-options></q-select> <q-select v-model="form._id_ctlg_tipos_sangre"  :options="options.tipos_sangre" label="Tipo de Sangre" emit-value map-options></q-select> <q-select v-model="form._id_ctlg_parentescos"  :options="options.parentescos" label="Con quién vive" emit-value map-options></q-select> <q-input v-model="form._observacion" label="Observación" lazy-rules :rules="[ val => val && val.length > 0 || 'Please type something']" ></q-input> </q-form> </q-card-section> <q-card-actions align="right"> <q-btn color="primary" @click="guardar">Guardar</q-btn> <q-btn flat v-close-popup >cancelar</q-btn> </q-card-actions> </q-card> </q-dialog> </template>