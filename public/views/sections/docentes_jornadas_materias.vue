<script>module.exports={data:function data(){return{filter:"",formActualizar:!1,ids:-1,docentess:"",jornadass:"",jornadasss:"",materiass:"",anos_lectivoss:"",options:{jornadas:[],materias:[]},docentes_jornadas_materias:{loading:!1,columns:[{name:"nombre_completo",field:"nombre_completo",label:"Docente"},{name:"materia",field:"materia",label:"Materia"},{name:"jornada",field:"jornada",label:"Jornada"},{name:"ano_lectivo",field:"ano_lectivo",label:"A\xF1o Lectivo"}],data:[]}}},filters:{capitalize:function capitalize(a){return a?(a=a.toString(),a.charAt(0).toUpperCase()+a.slice(1)):""},upper:function upper(a){return a?(a=a.toString(),a.toUpperCase()):""}},created:function created(){this.listaDocentesJornadas(),this.init()},methods:{excel:function excel(){this.report("Reporte Docentes-Materias ",this.docentes_jornadas_materias.columns,this.docentes_jornadas_materias.data)},editarDocenteJornada:function editarDocenteJornada(a){this.ids=a.id,this.docentess=a.nombre_completo,this.jornadass=a.jornada,this.materiass=a.materia,this.anos_lectivoss=a.ano_lectivo,this.jornadas(),this.materias(),this.formActualizar=!0},jornadas:function jornadas(){var a=this;return _.rget("docentes_jornadas_materias/jornadas_anos",{jornadasss:this.anos_lectivoss}).then(function(b){a.options.jornadas=b.data})},materias:function materias(){var a=this;return _.rget("docentes_jornadas_materias/materias_anos",{materiasss:this.anos_lectivoss}).then(function(b){a.options.materias=b.data})},guardar:function guardar(a){var b=this;null!==this.jornadass&&""!==this.jornadass&&null!==this.materiass&&""!==this.materiass?(this.$q.loading.show(),_.rput("docentes_jornadas_materias/".concat(this.ids),null,{ids:a.id,jornadass:this.jornadass,materiass:this.materiass}).then(function(){b.formActualizar=!1,b.listaDocentesJornadas(),b.$q.notify({type:"positive",message:"Actualizado con exito",timeout:500})})["catch"](function(a){b.$q.notify({type:"negative",message:a.message||"Hubo un error al actualizar"})})["finally"](function(){b.$q.loading.hide()})):this.$q.notify({type:"negative",message:"No se puede actualizar"})},eliminar:function eliminar(a){var b=this;this.ids=a.id,this.$q.loading.show(),_.rdelete("docentes_jornadas_materias/elim/".concat(this.ids),null,{ids:a.id}).then(function(){b.listaDocentesJornadas(),b.$q.notify({type:"positive",message:"Eliminado con exito",timeout:500})})["catch"](function(a){b.$q.notify({type:"negative",message:a.message||"Hubo un error al eliminar"})})["finally"](function(){b.$q.loading.hide()})},nuevoDocenteJornada:function nuevoDocenteJornada(){this.modal("docente_jornada_materia",{})},listaDocentesJornadas:function listaDocentesJornadas(){var a=this;this.docentes_jornadas_materias.loading=!0,_.rget("docentes_jornadas_materias").then(function(b){a.docentes_jornadas_materias.data=b.data})["finally"](function(){a.docentes_jornadas_materias.loading=!1})}}};</script> <style></style> <template> <q-page class="q-pa-md"> <br /> <q-table class="q-pa-md" title="Asignar Docente-Jornada-Materia" :data="docentes_jornadas_materias.data" :columns="docentes_jornadas_materias.columns" row-key="id" :filter="filter" :loading="docentes_jornadas_materias.loading" > <template v-slot:top-right> <div class="q-gutter-md row"> <q-btn color="primary" icon-right="add" label="Nueva Asignación" no-caps @click="nuevoDocenteJornada" ></q-btn> <q-btn color="teal" icon="save_alt" @click="excel"> <q-tooltip> Exportar a Excel </q-tooltip> </q-btn> <q-input filled borderless dense debounce="300" v-model="filter" placeholder="Buscar" > <template v-slot:append> <q-icon name="search" /> </template> </q-input> </div> </template> <template v-slot:header="props"> <br /> <q-tr text-align: center bgcolor="orange" :props="props"> <q-th auto-width style="text-align: center" v-for="col in props.cols" :key="col.name" :props="props" > {{ col.label }} </q-th> <q-th auto-width>Acción</q-th> </q-tr> </template> <template v-slot:body="props"> <q-tr :props="props"> <q-td style="text-align: center" v-for="col in props.cols" :key="col.name" :props="props" > {{ col.value | upper }} </q-td> <q-td auto-width style="text-align: center"> <template> <div class="q-gutter-sm"> <q-btn color="primary" round dense icon="edit" @click="editarDocenteJornada(props.row)" ></q-btn> <q-dialog v-model="formActualizar" persistent transition-show="scale" transition-hide="scale" > <q-card style="width: 300px"> <q-card-section> <div class="text-h6"> Asignar materias al docente </div> </q-card-section> <q-card-section style="max-height: 50vh" class="scroll" > <q-form class="q-gutter-md"> <q-select v-model="jornadass" :options="options.jornadas" label="Jornadas" map-options emit-value ></q-select> <q-select v-model="materiass" :options="options.materias" label="Materias" map-options emit-value ></q-select> <q-select disable v-model="docentess" label="Docentes" map-options emit-value ></q-select> </q-form> </q-card-section> <q-card-actions align="right"> <q-btn color="primary" @click="guardar" >Guardar</q-btn > <q-btn flat v-close-popup >cancelar</q-btn > </q-card-actions> </q-card> </q-dialog> <q-btn color="negative" round dense icon="delete" @click="eliminar(props.row)" ></q-btn> </div> </template> </q-td> </q-tr> </template> <template v-slot:loading> <q-inner-loading showing color="primary"></q-inner-loading> </template> </q-table> </q-page></template>