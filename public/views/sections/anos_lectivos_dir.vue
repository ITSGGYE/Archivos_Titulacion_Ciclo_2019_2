<script>module.exports={data:function data(){return{filter:"",formActualizar:!1,ids:"",_id_ctlg_estados:"",nombress:"",anos_lectivos:{loading:!1,columns:[{name:"nombre",field:"nombre",label:"A\xF1o Lectivo"}],data:[]}}},created:function created(){this.listaAnos(),this.init()},methods:{excel:function excel(){var a={name:"Anos lectivos",title:"Escuela Interamericana",subtitle:"reporte de estudiantes",cols:_.map(this.anos_lectivos.columns,function(a){return[a.name,a.label]}),data:this.anos_lectivos.data};axios({method:"post",url:api("catalogos/report"),data:a,responseType:"blob"}).then(function(a){var b=window.URL.createObjectURL(new Blob([a.data])),c=document.createElement("a");c.href=b,c.setAttribute("download","".concat("Anos lectivos",".xlsx")),document.body.appendChild(c),c.click()})},editarAno:function editarAno(a){var b=this;_.rput("anos_lectivos/zorro/".concat(a.id),null,{ids:a.id,_id_ctlg_estados:a.id_ctlg_estados}).then(function(){b.listaAnos()})["catch"](function(a){b.$q.notify({type:"negative",message:a.message||"Hubo un error al guardar"})})["finally"](function(){b.$q.loading.hide()})},nuevoAno:function nuevoAno(){this.modal("ano_lectivo",{})},listaAnos:function listaAnos(){var a=this;this.anos_lectivos.loading=!0,_.rget("anos_lectivos").then(function(b){a.anos_lectivos.data=b.data})["finally"](function(){a.anos_lectivos.loading=!1})}}};</script> <style></style> <template> <q-page class="q-pa-md"> <br /> <q-table class="q-pa-md" title="Años Lectivos" :data="anos_lectivos.data" :columns="anos_lectivos.columns" row-key="id"  :filter="filter" :loading="anos_lectivos.loading"> <template v-slot:top-right> <div class="q-gutter-md row"><!-- <q-btn color="primary" icon-right="add" label="Nuevo año Lectivo" no-caps @click="nuevoAno"></q-btn>--> <q-btn color="teal" icon="save_alt" @click="excel"> <q-tooltip> Exportar a Excel </q-tooltip> </q-btn> <q-input filled  borderless dense debounce="300" v-model="filter" placeholder="Buscar"> <template v-slot:append> <q-icon name="search" /> </template> </q-input> </div> </template> <template v-slot:header="props"> <br /> <q-tr  text-align: center  bgcolor="orange"   :props="props"> <q-th auto-width style="text-align: center;" v-for="col in props.cols" :key="col.name" :props="props"> {{ col.label }} </q-th> <q-th auto-width >Activar Año Lectivo</q-th> </q-tr> </template> <template v-slot:body="props"> <q-tr  :props="props"> <q-td style="text-align: center;" v-for="col in props.cols" :key="col.name" :props="props"> {{ col.value }} </q-td> <q-td  auto-width style="text-align: center;"> <!-- <span v-if="formActualizar && ids == props.row.id"> <q-btn  color="primary"  round dense  icon="check_circle"  @click="guardar" > </q-btn> <q-btn  color="negative"  round dense icon="close"  @click="formActualizar = false"></q-btn> </span>   -->  <!-- <q-btn color="primary" round dense icon="edit" @click="editarAno(props.row)"></q-btn>-->  <q-toggle v-model="props.row.id_ctlg_estados"  size="md" checked-icon="check" color="green" unchecked-icon="clear" :false-value="2" :true-value="1" @input="editarAno(props.row)&& ids==props.row.id"  ></q-toggle> </q-td> <!-- </q-tr> <q-tr v-show="formActualizar &&  ids == props.row.id" :props="props"> <q-td colspan="100%">   <q-input    v-model="nombress"    label="Nombre"    mask="#### - #### "   >   </q-input> </q-td> </q-tr>--> </template> <template v-slot:loading> <q-inner-loading showing color="primary"></q-inner-loading> </template> </q-table> </q-page></template>