<script>module.exports={data:function data(){return{filter:"",ids:-1,suma:0,exa:0,formActualizar:!1,sumass:" ",isHidden:1,y:"",loadingSelect:{docentes:!1,dac:!1,parciales:!1,periodos:!1,periodosss:!1,estudiantes:!1},f:{_id_anos_lectivos:"",_id_docentes:"",_id_dac:"",_id_periodos:"",_id_parciales:"",_id_estudiantes:"",_notas:""},options:{anos_lectivos:[],docentes:[],dac:[],parciales:[],periodos:[],periodosss:[],generales:[],estudiantes:[],libres:[],etiquetas_datos:[],etiquetas_dac:[],quintos:[]},notas:{loading:!1,data:[],columns:[{name:"cedula",field:"cedula",label:"C\xE9dula"},{name:"estudiante",field:"estudiante",label:"Estudiante"},{name:"tarea",field:"tarea",label:"Tarea"},{name:"leccion",field:"leccion",label:"Lecci\xF3n"},{name:"act_individual",field:"act_individual",label:"Act. Individual"},{name:"act_grupal",field:"act_grupal",label:"Act. Grupal"},{name:"evaluacion_escrita",field:"evaluacion_escrita",label:"Evaluaci\xF3n Escrita"},{name:"nota_final",field:"nota_final",label:"Promedio"}]},notas_quimi:{loading:!1,data:[],qui:[{name:"cedula",field:"cedula",label:"C\xE9dula"},{name:"estudiante",field:"estudiante",label:"Estudiante"},{name:"parcial_1",field:"parcial_1",label:"1er. Parcial"},{name:"parcial_2",field:"parcial_2",label:"2do. Parcial"},{name:"parcial_3",field:"parcial_3",label:"3er. Parcial"},{name:"total_parcial",field:"total_parcial",label:"80% Parciales"},{name:"examen",field:"examen",label:"Examen"},{name:"total_examen",field:"total_examen",label:"20% Examen"},{name:"nota_final",field:"nota_final",label:"Promedio Quimestral"}]},matru:{loading:!1,data:[],libre:[{name:"materia",field:"materia",label:"Materias"},{name:"parcial_1",field:"parcial_1",label:"1er. Parcial"},{name:"parcial_2",field:"parcial_2",label:"2do. Parcial"},{name:"parcial_3",field:"parcial_3",label:"3er. Parcial"},{name:"total_parcial",field:"total_parcial",label:"80% Parciales"},{name:"examen",field:"examen",label:"Examen"},{name:"total_examen",field:"total_examen",label:"20% Examen"},{name:"nota_final",field:"nota_final",label:"Promedio Quimestral"}]},estParcial:{loading:!1,data:[],report_parcial:[{name:"materia",field:"materia",label:"Materias"},{name:"tarea",field:"tarea",label:"Tarea"},{name:"leccion",field:"leccion",label:"Lecci\xF3n"},{name:"act_individual",field:"act_individual",label:"Act. Individual"},{name:"act_grupal",field:"act_grupal",label:"Act. Grupal"},{name:"evaluacion_escrita",field:"evaluacion_escrita",label:"Evaluaci\xF3n Escrita"},{name:"nota_final",field:"nota_final",label:"Promedio"}]}}},filters:{capitalize:function capitalize(a){return a?(a=a.toString(),a.charAt(0).toUpperCase()+a.slice(1)):""},upper:function upper(a){return a?(a=a.toString(),a.toUpperCase()):""}},created:function created(){var a=this;Promise.all([this.anos_lectivos()]).then(function(){a.init()})},watch:{isHidden:function isHidden(){this.limpiarSelect()}},methods:{limpiarSelect:function limpiarSelect(){this.f._id_anos_lectivos="",this.f._id_docentes="",this.f._id_dac="",this.f._id_periodos="",this.f._id_parciales="",this.f._id_estudiantes=""},excel:function excel(){this.report("Reporte "+this.y,this.notas.columns,this.notas.data)},excels:function excels(){this.report("Reporte "+this.y,this.notas_quimi.qui,this.notas_quimi.data)},parc_est:function parc_est(){this.report(this.y,this.estParcial.report_parcial,this.estParcial.data)},qui_est:function qui_est(){this.report(this.y,this.matru.libre,this.matru.data)},anos_lectivos:function anos_lectivos(){var a=this;return _.rget("anos_lectivos/anos_lectivosreport").then(function(b){a.options.anos_lectivos=b.data})},docentes:function docentes(){var a=this;return this.f._id_docentes="",this.notas.data=[],this.loadingSelect.docentes=!0,_.rget("notas/docentes_anos/".concat(this.f._id_anos_lectivos)).then(function(b){a.options.docentes=b.data})["finally"](function(){a.loadingSelect.docentes=!1})},dac:function dac(){var a=this;return this.f._id_dac="",this.f._id_dre="",this.notas.data=[],this.loadingSelect.dac=!0,_.rget("notas/dac_ano",{_id_docente:this.f._id_docentes,_id_anos_lectivo:this.f._id_anos_lectivos}).then(function(b){a.options.dac=b.data})["finally"](function(){a.loadingSelect.dac=!1})},parciales:function parciales(){var a=this;return this.f._id_parciales="",this.notas.data=[],this.loadingSelect.parciales=!0,_.rget("notas/parciales/".concat(this.f._id_periodos)).then(function(b){a.options.parciales=b.data})["finally"](function(){a.loadingSelect.parciales=!1})},periodos:function periodos(){var a=this;return this.f._id_periodos="",this.notas.data=[],this.loadingSelect.periodos=!0,_.rget("notas/periodos/".concat(this.f._id_dac)).then(function(b){a.options.periodos=b.data})["finally"](function(){a.loadingSelect.periodos=!1})},estudiantes:function estudiantes(){var a=this;return this.f._id_estudiantes="",this.matru.data=[],this.loadingSelect.estudiantes=!0,_.rget("notas/ano_estud/".concat(this.f._id_anos_lectivos)).then(function(b){a.options.estudiantes=b.data})["finally"](function(){a.loadingSelect.estudiantes=!1})},periodosss:function periodosss(){var a=this;return this.f._id_periodos="",this.matru.data=[],this.loadingSelect.periodosss=!0,_.rget("periodos/ctlg/".concat(this.f._id_anos_lectivos)).then(function(b){a.options.periodosss=b.data})["finally"](function(){a.loadingSelect.periodosss=!1})},generales:function generales(){var a=this;return this.notas.loading=!0,_.rget("notas/notas_finales_parcial_periodo_curso",{_id_anos_lectivoss:this.f._id_anos_lectivos,_id_docentess:this.f._id_docentes,_id_dacss:this.f._id_dac,_id_periodoss:this.f._id_periodos,_id_parcialess:this.f._id_parciales}).then(function(b){a.notas.data=b.data})["finally"](function(){a.notas.loading=!1})},quintos:function quintos(){var a=this;return this.notas_quimi.loading=!0,_.rget("notas/notas_finales_quimestral",{_id_anos_lectivoss:this.f._id_anos_lectivos,_id_docentess:this.f._id_docentes,_id_dacss:this.f._id_dac,_id_periodoss:this.f._id_periodos}).then(function(b){a.notas_quimi.data=b.data})["finally"](function(){a.notas_quimi.loading=!1})},libres:function libres(){var a=this;return this.matru.loading=!0,_.rget("notas/notas_quimestrales_estudiante",{_id_estudiantess:this.f._id_estudiantes,_id_anos_lectivoss:this.f._id_anos_lectivos,_id_periodoss:this.f._id_periodos}).then(function(b){a.matru.data=b.data})["finally"](function(){a.matru.loading=!1})},report_parciales:function report_parciales(){var a=this;return this.estParcial.loading=!0,_.rget("notas/notas_finales_estudiante",{_id_estudiantess:this.f._id_estudiantes,_id_anos_lectivoss:this.f._id_anos_lectivos,_id_periodoss:this.f._id_periodos,_id_parcialess:this.f._id_parciales}).then(function(b){a.estParcial.data=b.data})["finally"](function(){a.estParcial.loading=!1})},etiquetas_datos:function etiquetas_datos(){var a=this;return _.rget("notas/estudiantes_periodo_libreta",{_id_estudiantess:this.f._id_estudiantes,_id_anos_lectivoss:this.f._id_anos_lectivos,_id_periodoss:this.f._id_periodos}).then(function(b){a.options.etiquetas_datos=b.data[0].label,a.y=a.options.etiquetas_datos})},etiquetas_datos_parc:function etiquetas_datos_parc(){var a=this;return _.rget("notas/estudiantes_parcial_libreta",{_id_estudiantess:this.f._id_estudiantes,_id_anos_lectivoss:this.f._id_anos_lectivos,_id_periodoss:this.f._id_periodos,_id_parcialess:this.f._id_parciales}).then(function(b){a.options.etiquetas_datos_parc=b.data[0].label,a.y=a.options.etiquetas_datos_parc})},etiquetas_dac:function etiquetas_dac(){var a=this;return _.rget("notas/dac_etiqueta/".concat(this.f._id_dac)).then(function(b){a.options.etiquetas_dac=b.data[0].label,a.y=a.options.etiquetas_dac})},sumar:function sumar(a){totales=0,suma=[a.act_grupal,a.leccion,a.act_individual,a.tarea,a.evaluacion_escrita],n=suma.filter(Boolean),totales=(n.reduce(function(c,a){return c+a},0)/n.length).toFixed(2),this.suma=totales},editarNota:function editarNota(a){this.ids=a.id,totales=0,suma=[a.act_grupal,a.leccion,a.act_individual,a.tarea,a.evaluacion_escrita],n=suma.filter(function(a){return 0===a||!!a}),totales=(n.reduce(function(c,a){return c+a},0)/n.length).toFixed(2),this.sumass=totales,this.formActualizar=!0},editarQui:function editarQui(a){this.ids=a.id,pro_parcial=0,pro_examen=0,totales=0,suma=[a.parcial_1,a.parcial_2,a.parcial_3],n=suma.filter(function(a){return 0===a||!!a}),pro_parcial=(n.reduce(function(c,a){return c+a},0)/n.length).toFixed(2),exa=[a.examen],z=exa.filter(function(a){return 0===a||!!a}),pro_examen=(z.reduce(function(c,a){return c+a},0)/z.length).toFixed(2),totales=(.8*pro_parcial+.2*pro_examen).toFixed(2),this.sumass=totales},exportTable:function exportTable(){},listaActividadesCursos:function listaActividadesCursos(){var a=this;this.actividades_cursos.loading=!0,_.rget("actividades_cursos").then(function(b){a.actividades_cursos.data=b.data})["finally"](function(){a.actividades_cursos.loading=!1})}}};</script> <style></style> <template> <q-page class="q-pa-md"> <div class="q-pa-md q-gutter-sm"> <div class="q-gutter-sm"> <span>Buscar por:</span> <q-radio dense v-model="isHidden" :val="1" label="Curso Parcial" ></q-radio> <q-radio dense v-model="isHidden" :val="2" :loading="true" label="Curso Quimestral" ></q-radio> <q-radio dense v-model="isHidden" :val="3" label="Estudiante Parcial" ></q-radio> <q-radio dense v-model="isHidden" :val="4" label="Estudiante Quimestre" ></q-radio> </div> </div> <br /> <div v-if="isHidden == 1"> <div class="q-pa-md q-gutter-sm row items-start"> <div class="col"> <q-select standout="bg-deep-purple-6 text-white" label="A単o Lectivo" v-model="f._id_anos_lectivos" @input="docentes()" :options="options.anos_lectivos" emit-value map-options style="min-width: 150px" ></q-select> </div> <div class="col"> <q-select standout="bg-deep-purple-6 text-white" label="Docentes" v-model="f._id_docentes" @input="dac()" :options="options.docentes" :loading="loadingSelect.docentes" emit-value map-options style="min-width: 150px" ></q-select> </div> <div class="col"> <q-select standout="bg-deep-purple-6 text-white" label="Curso -Aula/Paralelo -Materia" v-model="f._id_dac" @input="periodos(), etiquetas_dac()" :options="options.dac" :loading="loadingSelect.dac" emit-value map-options style="min-width: 150px" ></q-select> </div> <div class="col"> <q-select standout="bg-deep-purple-6 text-white" label=" Periodo" v-model="f._id_periodos" @input="parciales()" :options="options.periodos" :loading="loadingSelect.periodos" emit-value map-options style="min-width: 150px" ></q-select> </div> <div class="col"> <q-select standout="bg-deep-purple-6 text-white" label=" Parcial" v-model="f._id_parciales" @input="generales()" v-show="sumar" :options="options.parciales" :loading="loadingSelect.parciales" emit-value map-options style="min-width: 150px" ></q-select> </div> </div> <br /> <br /> <q-table class="q-my-sm q-pa-md" title="Notas" :data="notas.data" :columns="notas.columns" row-key="id" :filter="filter" :loading="notas.loading" id="tblData" hide-bottom > <template v-slot:top-right> <div class="q-gutter-md row"> <q-btn color="teal" icon="save_alt" @click="excel"> <q-tooltip> Exportar a Excel </q-tooltip> </q-btn> <q-input filled borderless dense debounce="300" v-model="filter" placeholder="Buscar" > <template v-slot:append> <q-icon name="search" /> </template> </q-input> </div> </template> <template v-slot:header="props"> <br /> <q-tr text-align: center bgcolor="orange" :props="props"> <q-th style="text-align: center" v-for="col in props.cols" :key="col.name" :props="props" >{{ col.label }}</q-th > <q-th auto-width></q-th> </q-tr> </template> <template v-slot:body="props"> <q-tr :props="props"> <q-td style="text-align: center" v-for="col in props.cols" :key="col.name" :props="props" > <div v-if="col.value < 7 && col.value !== null"> <q-badge color="negative">{{ col.value | upper }}</q-badge> </div> <div v-else-if=" col.value === null || col.value === '' " > <q-badge color="dark">{{ col.value | upper }}</q-badge> </div> <div v-else>{{ col.value | upper }}</div> </q-td> </q-tr> </template> <template v-slot:loading> <q-inner-loading showing color="primary"></q-inner-loading> </template> </q-table> </div> <!-- ///////////////////////////////////   Cursos Quimestre  ////////////////////////// --> <div v-if="isHidden == 2"> <div class="q-gutter-md row items-start"> <div class="col"> <q-select standout="bg-deep-purple-6 text-white" label="A単o Lectivo" v-model="f._id_anos_lectivos" @input="docentes()" :options="options.anos_lectivos" emit-value map-options style="min-width: 150px" ></q-select> </div> <div class="col"> <q-select standout="bg-deep-purple-6 text-white" label="Docentes" v-model="f._id_docentes" @input="dac()" :options="options.docentes" :loading="loadingSelect.docentes" emit-value map-options style="min-width: 150px" ></q-select> </div> <div class="col"> <q-select standout="bg-deep-purple-6 text-white" label="Curso -Aula/Paralelo -Materia" v-model="f._id_dac" @input="periodos(), etiquetas_dac()" :options="options.dac" :loading="loadingSelect.dac" emit-value map-options style="min-width: 150px" ></q-select> </div> <div class="col"> <q-select standout="bg-deep-purple-6 text-white" label=" Periodo" v-model="f._id_periodos" @input="quintos()" :options="options.periodos" :loading="loadingSelect.periodos" emit-value map-options style="min-width: 150px" ></q-select> </div> </div> <br /> <br /> <q-table class="q-pa-md" title="Notas" :data="notas_quimi.data" :columns="notas_quimi.qui" row-key="id" :filter="filter" :loading="notas_quimi.loading" hide-bottom > <template v-slot:top-right> <div class="q-gutter-md row"> <q-btn color="teal" icon="save_alt" @click="excels"> <q-tooltip> Exportar a Excel </q-tooltip> </q-btn> <q-input filled borderless dense debounce="300" v-model="filter" placeholder="Buscar" > <template v-slot:append> <q-icon name="search" /> </template> </q-input> </div> </template> <template v-slot:header="props"> <br /> <q-tr text-align: center bgcolor="orange" :props="props"> <q-th style="text-align: center" v-for="col in props.cols" :key="col.name" :props="props" >{{ col.label }}</q-th > <q-th auto-width></q-th> </q-tr> </template> <template v-slot:body="props"> <q-tr :props="props"> <q-td style="text-align: center" v-for="col in props.cols" :key="col.name" :props="props" > <div v-if="col.value < 7 && col.value !== null"> <q-badge color="negative"> {{ col.value | upper }}</q-badge > </div> <div v-else-if=" col.value === null || col.value === '' " > <q-badge color="dark">{{ col.value | upper }}</q-badge> </div> <div v-else>{{ col.value | upper }}</div> </q-td> </q-tr> </template> <template v-slot:loading> <q-inner-loading showing color="primary"></q-inner-loading> </template> </q-table> </div> <!-- ///////////////////////////////////   Estudiante Parcial  ////////////////////////// --> <div v-if="isHidden == 3"> <div class="q-gutter-md row items-start"> <div class="col"> <q-select standout="bg-deep-purple-6 text-white" label="A単o Lectivo" v-model="f._id_anos_lectivos" @input="periodosss(), estudiantes()" :options="options.anos_lectivos" emit-value map-options style="min-width: 150px" > </q-select> </div> <div class="col"> <q-select class="text-capitalize" standout="bg-deep-purple-6 text-white" label=" Estudiante" v-model="f._id_estudiantes" :options="options.estudiantes" :loading="loadingSelect.estudiantes" emit-value map-options style="min-width: 150px" ></q-select> </div> <div class="col"> <q-select standout="bg-deep-purple-6 text-white" label=" Periodo" v-model="f._id_periodos" @input="parciales()" :options="options.periodosss" :loading="loadingSelect.periodosss" emit-value map-options style="min-width: 150px" ></q-select> </div> <div class="col"> <q-select standout="bg-deep-purple-6 text-white" label=" Parcial" v-model="f._id_parciales" @input="report_parciales(), etiquetas_datos_parc()" :options="options.parciales" :loading="loadingSelect.parciales" emit-value map-options style="min-width: 150px" ></q-select> </div> </div> <br /> <br /> <q-table class="q-pa-md" title="Notas" :data="estParcial.data" :columns="estParcial.report_parcial" row-key="id" :filter="filter" :loading="estParcial.loading" hide-bottom > <template v-slot:top-right> <div class="q-gutter-md row"> <q-btn color="teal" icon="save_alt" @click="parc_est"> <q-tooltip> Exportar a Excel </q-tooltip> </q-btn> <q-input filled borderless dense debounce="300" v-model="filter" placeholder="Buscar" > <template v-slot:append> <q-icon name="search" /> </template> </q-input> </div> </template> <template v-slot:header="props"> <br /> <q-tr text-align: center bgcolor="orange" :props="props"> <q-th style="text-align: center" v-for="col in props.cols" :key="col.name" :props="props" > {{ col.label }} </q-th> <q-th auto-width></q-th> </q-tr> </template> <template v-slot:body="props"> <q-tr :props="props"> <q-td style="text-align: center" v-for="col in props.cols" :key="col.name" :props="props" > <div v-if="col.value < 7 && col.value !== null"> <q-badge color="negative"> {{ col.value | upper }} </q-badge> </div> <div v-else-if=" col.value === null || col.value === '' " > <q-badge color="dark"> {{ col.value | upper }} </q-badge> </div> <div v-else> {{ col.value | upper }} </div> </q-td> </q-tr> </template> <template v-slot:loading> <q-inner-loading showing color="primary"></q-inner-loading> </template> </q-table> </div> <!-- ///////////////////////////////////   Estudiante Quimestre  ////////////////////////// --> <div v-if="isHidden == 4"> <div class="q-gutter-md row items-start"> <div class="col"> <q-select standout="bg-deep-purple-6 text-white" label="A単o Lectivo" v-model="f._id_anos_lectivos" @input="periodosss(), estudiantes()" :options="options.anos_lectivos" emit-value map-options style="min-width: 150px" > </q-select> </div> <!--  <div class="col">         <q-select standout="bg-deep-purple-6 text-white" label="Docentes" v-model="f._id_docentes"  @input="dac()" :options="options.docentes"  emit-value map-options style="min-width: 150px"> </q-select>       </div>--> <div class="col"> <q-select class="text-capitalize" standout="bg-deep-purple-6 text-white" label=" Estudiante" v-model="f._id_estudiantes" :options="options.estudiantes" :loading="loadingSelect.estudiantes" emit-value map-options style="min-width: 150px" ></q-select> </div> <div class="col"> <q-select standout="bg-deep-purple-6 text-white" label=" Periodo" v-model="f._id_periodos" @input="libres(), etiquetas_datos()" :options="options.periodosss" :loading="loadingSelect.periodosss" emit-value map-options style="min-width: 150px" ></q-select> </div> </div> <br /> <br /> <q-table class="q-pa-md" title="Notas" :data="matru.data" :columns="matru.libre" row-key="id" :filter="filter" :loading="matru.loading" hide-bottom > <template v-slot:top-right> <div class="q-gutter-md row"> <q-btn color="teal" icon="save_alt" @click="qui_est"> <q-tooltip> Exportar a Excel </q-tooltip> </q-btn> <q-input filled borderless dense debounce="300" v-model="filter" placeholder="Buscar" > <template v-slot:append> <q-icon name="search" /> </template> </q-input> </div> </template> <template v-slot:header="props"> <br /> <q-tr text-align: center bgcolor="orange" :props="props"> <q-th style="text-align: center" v-for="col in props.cols" :key="col.name" :props="props" > {{ col.label }} </q-th> <q-th auto-width></q-th> </q-tr> </template> <template v-slot:body="props"> <q-tr :props="props"> <q-td style="text-align: center" v-for="col in props.cols" :key="col.name" :props="props" > <div v-if="col.value < 7 && col.value !== null"> <q-badge color="negative"> {{ col.value | upper }} </q-badge> </div> <div v-else-if=" col.value === null || col.value === '' " > <q-badge color="dark"> {{ col.value | upper }} </q-badge> </div> <div v-else> {{ col.value | upper }} </div> </q-td> <!--<q-td auto-width> <q-btn size="sm" color="accent" round dense @click=" editarQui( props.row, (props.expand = !props.expand) ) " :icon="props.expand ? 'remove' : 'add'" />--> <!--<q-btn color="primary" round dense icon="edit" @click="editarNota(props.row)"></q-btn> --> <!-- </q-td> </q-tr> <q-tr v-show="ids == props.row.ma && props.expand" :props="props" > <q-td colspan="100%" class="text-purple"> <q-input color="text-purple" v-model="sumass" label="Promedio" readonly ></q-input> </q-td>--> </q-tr> </template> <template v-slot:loading> <q-inner-loading showing color="primary"></q-inner-loading> </template> </q-table> </div> </q-page></template>