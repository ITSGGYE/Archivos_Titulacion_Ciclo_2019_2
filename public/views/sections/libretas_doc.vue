<script>module.exports={data:function data(){return{filter:"",ids:-1,suma:0,formActualizar:!1,sumass:" ",isHidden:!0,f:{_id_anos_lectivos:"",_id_docentes:this.$root.currentPage.app.informacion.id_docentes,_id_dac:"",_id_periodos:"",_id_parciales:"",_notas:""},options:{anos_lectivos:[],docentes:[],dac:[],parciales:[],periodos:[],generales:[],quintos:[]},notas:{loading:!1,data:[],columns:[{name:"cedula",field:"cedula",label:"Cedula"},{name:"estudiante",field:"estudiante",label:"Estudiante"},{name:"tarea",field:"tarea",label:"Tarea"},{name:"leccion",field:"leccion",label:"Lecci\xF3n"},{name:"act_individual",field:"act_individual",label:"Act. Individual"},{name:"act_grupal",field:"act_grupal",label:"Act. Grupal"},{name:"evaluacion_escrita",field:"evaluacion_escrita",label:"Evaluaci\xF3n Escrita"},{name:"nota_final",field:"nota_final",label:"Promedio"}],qui:[{name:"cedula",field:"cedula",label:"Cedula"},{name:"estudiante",field:"estudiante",label:"Estudiante"},{name:"parcial_1",field:"parcial_1",label:"1er. Parcial"},{name:"parcial_2",field:"parcial_2",label:"2do. Parcial"},{name:"parcial_3",field:"parcial_3",label:"3er. Parcial"},{name:"total_parcial",field:"total_parcial",label:"80% Parciales"},{name:"examen",field:"examen",label:"Examen"},{name:"total_examen",field:"total_examen",label:"20% Examen"},{name:"nota_final",field:"nota_final",label:"Promedio Quimestral"}]}}},filters:{capitalize:function capitalize(a){return a?(a=a.toString(),a.charAt(0).toUpperCase()+a.slice(1)):""},upper:function upper(a){return a?(a=a.toString(),a.toUpperCase()):""}},created:function created(){var a=this;console.log(this.$root.currentPage.app.informacion),Promise.all([this.anos_lectivos(this.$root.currentPage.app.informacion.id_docentes)]).then(function(){a.init()})},methods:{docentes:function docentes(){var a=this;return _.rget("notas/docentes").then(function(b){a.options.docentes=b.data})},anos_lectivos:function anos_lectivos(a){var b=this;return _.rget("docentes_asignar_cursos/docentes_asignar_anoreporte/".concat(a)).then(function(a){b.options.anos_lectivos=a.data})},dac:function dac(){var a=this;return this.f._id_dac="",this.f._id_dre="",this.notas.data=[],_.rget("notas/dac_ano",{_id_docente:this.$root.currentPage.app.informacion.id_docentes,_id_anos_lectivo:this.f._id_anos_lectivos}).then(function(b){a.options.dac=b.data})},parciales:function parciales(){var a=this;return this.notas.data=[],_.rget("notas/parciales/".concat(this.f._id_periodos)).then(function(b){a.options.parciales=b.data})},periodos:function periodos(){var a=this;return this.notas.data=[],_.rget("notas/periodos/".concat(this.f._id_dac)).then(function(b){a.options.periodos=b.data})},generales:function generales(){var a=this;return _.rget("notas/notas_finales_parcial_periodo_curso",{_id_anos_lectivoss:this.f._id_anos_lectivos,_id_docentess:this.$root.currentPage.app.informacion.id_docentes,_id_dacss:this.f._id_dac,_id_periodoss:this.f._id_periodos,_id_parcialess:this.f._id_parciales}).then(function(b){a.notas.data=b.data})},quintos:function quintos(){var a=this;return _.rget("notas/notas_finales_quimestral",{_id_anos_lectivoss:this.f._id_anos_lectivos,_id_docentess:this.$root.currentPage.app.informacion.id_docentes,_id_dacss:this.f._id_dac,_id_periodoss:this.f._id_periodos}).then(function(b){a.notas.data=b.data})},sumar:function sumar(a){totales=0,suma=[a.act_grupal,a.leccion,a.act_individual,a.tarea,a.evaluacion_escrita],n=suma.filter(0<=suma),totales=(n.reduce(function(c,a){return c+a},0)/n.length).toFixed(2),this.suma=totales},editarNota:function editarNota(a){this.ids=a.id,totales=0,suma=[a.act_grupal,a.leccion,a.act_individual,a.tarea,a.evaluacion_escrita],n=suma.filter(function(a){return 0===a||!!a}),totales=(n.reduce(function(c,a){return c+a},0)/n.length).toFixed(2),this.sumass=totales,this.formActualizar=!0,console.log("eee"+this.sumass)},editarQui:function editarQui(a){this.ids=a.id,pro_parcial=0,pro_examen=0,totales=0,suma=[a.parcial_1,a.parcial_2,a.parcial_3],n=suma.filter(function(a){return 0===a||!!a}),pro_parcial=(n.reduce(function(c,a){return c+a},0)/n.length).toFixed(2),exa=[a.examen],z=exa.filter(function(a){return 0===a||!!a}),pro_examen=(z.reduce(function(c,a){return c+a},0)/z.length).toFixed(2),totales=(.8*pro_parcial+.2*pro_examen).toFixed(2),this.sumass=totales,console.log("eee"+this.sumass)},listaActividadesCursos:function listaActividadesCursos(){var a=this;this.actividades_cursos.loading=!0,_.rget("actividades_cursos").then(function(b){a.actividades_cursos.data=b.data})["finally"](function(){a.actividades_cursos.loading=!1})}}};</script> <style></style> <template> <q-page class="q-pa-md"> <div class="q-pa-md q-gutter-sm"> <div class="q-gutter-sm"> <span> Buscar por: </span> <q-radio dense v-model="isHidden" :val="true" label="Parcial" ></q-radio> <q-radio dense v-model="isHidden" :val="false" label="Quimestral" ></q-radio> </div> </div> <br /> <div v-if="isHidden"> <div class="q-gutter-md row items-start"> <div class="col"> <q-select standout="bg-deep-purple-6 text-white" label="Año Lectivo" v-model="f._id_anos_lectivos" @input="dac()" :options="options.anos_lectivos" emit-value map-options style="min-width: 150px;" > </q-select> </div> <!--  <div class="col">         <q-select standout="bg-deep-purple-6 text-white" label="Docentes" v-model="f._id_docentes"  @input="dac()" :options="options.docentes"  emit-value map-options style="min-width: 150px"> </q-select>       </div>--> <div class="col"> <q-select standout="bg-deep-purple-6 text-white" label="Curso -Aula/Paralelo -Materia" v-model="f._id_dac" @input="periodos()" :options="options.dac" emit-value map-options style="min-width: 150px;" > </q-select> </div> <div class="col"> <q-select standout="bg-deep-purple-6 text-white" label=" Periodo" v-model="f._id_periodos" @input="parciales()" :options="options.periodos" emit-value map-options style="min-width: 150px;" ></q-select> </div> <div class="col"> <q-select standout="bg-deep-purple-6 text-white" label=" Parcial" v-model="f._id_parciales" @input="generales()" v-show="sumar" :options="options.parciales" emit-value map-options style="min-width: 150px;" ></q-select> </div> </div> <br /> <br /> <q-table class="q-pa-md" title="Notas" :data="notas.data" :columns="notas.columns" row-key="id" :filter="filter" :loading="notas.loading" > <template v-slot:top-right> <div class="q-gutter-md row"> <q-input filled borderless dense debounce="300" v-model="filter" placeholder="Buscar" > <template v-slot:append> <q-icon name="search" /> </template> </q-input> </div> </template> <template v-slot:header="props"> <br /> <q-tr text-align: center bgcolor="orange" :props="props"> <q-th style="text-align: center;" v-for="col in props.cols" :key="col.name" :props="props" > {{ col.label }} </q-th> <q-th auto-width></q-th> </q-tr> </template> <template v-slot:body="props"> <q-tr :props="props"> <q-td style="text-align: center;" v-for="col in props.cols" :key="col.name" :props="props" > <div v-if=" col.value < 7 && col.value !== null && col.value !== '' " > <q-badge color="negative"> {{ col.value | upper }} </q-badge> </div> <div v-else-if=" col.value === null || col.value === '' " > <q-badge color="dark"> {{ col.value | upper }} </q-badge> </div> <div v-else> {{ col.value | upper }} </div> </q-td> <!--<q-td auto-width> <q-btn size="sm" color="accent" round dense @click=" editarNota( props.row, (props.expand = !props.expand) ) " :icon="props.expand ? 'remove' : 'add'" />--> <!--<q-btn color="primary" round dense icon="edit" @click="editarNota(props.row)"></q-btn> --> <!-- </q-td> </q-tr> <q-tr v-show="ids == props.row.id && props.expand" :props="props" > <q-td colspan="100%" class="text-purple"> <q-input color="text-purple" v-model="sumass" label="Promedio" readonly ></q-input> </q-td> </q-tr>--> </template> <template v-slot:loading> <q-inner-loading showing color="primary"></q-inner-loading> </template> </q-table> </div> <div v-if="isHidden == false"> <div class="q-gutter-md row items-start"> <div class="col"> <q-select standout="bg-deep-purple-6 text-white" label="Año Lectivo" v-model="f._id_anos_lectivos" @input="dac()" :options="options.anos_lectivos" emit-value map-options style="min-width: 150px;" > </q-select> </div> <div class="col"> <q-select standout="bg-deep-purple-6 text-white" label="Curso -Aula/Paralelo -Materia" v-model="f._id_dac" @input="periodos()" :options="options.dac" emit-value map-options style="min-width: 150px;" > </q-select> </div> <div class="col"> <q-select standout="bg-deep-purple-6 text-white" label=" Periodo" v-model="f._id_periodos" @input="quintos()" :options="options.periodos" emit-value map-options style="min-width: 150px;" ></q-select> </div> </div> <br /> <br /> <q-table class="q-pa-md" title="Notas" :data="notas.data" :columns="notas.qui" row-key="id" :filter="filter" :loading="notas.loading" > <template v-slot:top-right> <div class="q-gutter-md row"> <q-input filled borderless dense debounce="300" v-model="filter" placeholder="Buscar" > <template v-slot:append> <q-icon name="search" /> </template> </q-input> </div> </template> <template v-slot:header="props"> <br /> <q-tr text-align: center bgcolor="orange" :props="props"> <q-th style="text-align: center;" v-for="col in props.cols" :key="col.name" :props="props" > {{ col.label }} </q-th> <q-th auto-width></q-th> </q-tr> </template> <template v-slot:body="props"> <q-tr :props="props"> <q-td style="text-align: center;" v-for="col in props.cols" :key="col.name" :props="props" > <div v-if="col.value < 7 && col.value !== null"> <q-badge color="negative"> {{ col.value | upper }} </q-badge> </div> <div v-else-if=" col.value === null || col.value === '' " > <q-badge color="dark"> {{ col.value | upper }} </q-badge> </div> <div v-else> {{ col.value | upper }} </div> </q-td> <!-- <q-td auto-width> <q-btn size="sm" color="accent" round dense @click=" editarQui( props.row, (props.expand = !props.expand) ) " :icon="props.expand ? 'remove' : 'add'" />--> <!--<q-btn color="primary" round dense icon="edit" @click="editarNota(props.row)"></q-btn> --> <!-- </q-td> </q-tr> <q-tr v-show="ids == props.row.id && props.expand" :props="props" > <q-td colspan="100%" class="text-purple"> <q-input color="text-purple" v-model="sumass" label="Promedio" readonly ></q-input> </q-td> </q-tr>--> </template> <template v-slot:loading> <q-inner-loading showing color="primary"></q-inner-loading> </template> </q-table> </div> </q-page></template>